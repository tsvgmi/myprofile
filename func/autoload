function _fr {
  typeset func=$1; shift
  typeset ftype ifs loaded sdir

  ftype=`type -t $func`
  if [ "$ftype" != 'function' ]; then
    ifs=$IFS IFS=:
    for sdir in $FPATH; do
      ffile=$sdir/$func
      if [ -r $ffile ]; then
	#echo >&2 "+ loading $ffile"
	. $ffile
	loaded=yes
	break
      fi
    done
    IFS=$ifs
    if [ ! "$loaded" ]; then
      echo >&2 "+ No autoload function found for $func"
      return
    fi
    unalias $func
  fi
  $func $@
}

function autoload {
  for func in $*; do
    alias $func="_fr $func"
  done
}
